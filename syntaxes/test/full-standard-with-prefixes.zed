// this is a standard schema that should have every available feature (wildcards, caveats, etc) and using prefixes for definitions and caveats
use expiration

definition acme/user {}

definition acme/group {
	relation member: acme/user with acme/non_expired_grant | acme/user with expiration
	relation member2: acme/user:* with acme/non_expired_grant
}

definition acme/document {
	relation group: acme/group
    
	relation aaa: acme/user:* | acme/group#member
	relation bbb: acme/user:*
	relation ccc: acme/user:*
	relation ddd: acme/user:*


	// a comment
	permission view = aaa

	permission nilable = nil


	/* another comment */
	permission view2 = aaa + bbb
	permission view3 = (aaa + bbb) - (ccc & ddd)
	permission view4 = group.any(member)
	permission view5 = group.all(member)
	permission view6 = group->member
}

caveat acme/non_expired_grant(name string, description string) {
  name.matches("-$test") || size(description) >= 100
}
